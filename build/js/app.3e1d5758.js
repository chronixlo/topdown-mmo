!function(t){function n(n){for(var i,a,s=n[0],u=n[1],h=n[2],f=0,l=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&l.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);for(c&&c(n);l.length;)l.shift()();return o.push.apply(o,h||[]),e()}function e(){for(var t,n=0;n<o.length;n++){for(var e=o[n],i=!0,s=1;s<e.length;s++){var u=e[s];0!==r[u]&&(i=!1)}i&&(o.splice(n--,1),t=a(a.s=e[0]))}return t}var i={},r={0:0},o=[];function a(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=i,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)a.d(e,i,function(n){return t[n]}.bind(null,i));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var h=0;h<s.length;h++)n(s[h]);var c=u;o.push([112,1]),e()}({110:function(t,n,e){},112:function(t,n,e){"use strict";e.r(n);e(25),e(41),e(42),e(93),e(44),e(65),e(96),e(66),e(98),e(24),e(47),e(73),e(74),e(48),e(107),e(49),e(75),e(50);function i(t,n){var e=t+h.x-Y,i=n+h.y-C;return e<0?e=0:e>X&&(e=X),i<0?i=0:i>X&&(i=X),{x:e,y:i}}function r(t,n){return{x:t-h.x+Y,y:n-h.y+C}}function o(t,n){return Math.floor(Math.random()*(n-t))+t}var a=new function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.mouseX=0,this.mouseY=0,this.mouse1=!1,this.mouse2=!1};function s(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=5e3,this.y=5e3,this.destination=null,this.facing=0,this.facingTarget=null,this.radius=20,this.target=null,this.wcStart=null,this.logs=0}var n,e,r;return n=t,(e=[{key:"woodcut",value:function(){this.target.logs--,this.logs++,this.target.logs?this.wcStart=Date.now():(this.target.dead=!0,this.target=null,this.wcStart=null)}},{key:"setDestination",value:function(t){this.target=null;var n=i(a.mouseX,a.mouseY),e={x:this.x,y:this.y},r=null;Q.filter((function(t){return!t.dead})).forEach((function(t){t.playerBoundsSegments.forEach((function(t){var i=function(t,n,e,i){var r=t.x-n.x,o=e.x-i.x,a=t.y-n.y,s=e.y-i.y,u=r*s-a*o;if(0==u)return null;var h=t.x*n.y-t.y*n.x,c=e.x*i.y-e.y*i.x,f=(h*o-r*c)/u,l=(h*s-a*c)/u;if(f<Math.min(t.x,n.x)||f>Math.max(t.x,n.x)||f<Math.min(e.x,i.x)||f>Math.max(e.x,i.x))return null;if(l<Math.min(t.y,n.y)||l>Math.max(t.y,n.y)||l<Math.min(e.y,i.y)||l>Math.max(e.y,i.y))return null;var y=Math.hypot(t.x-f,t.y-l);return{x:f,y:l,dist:y}}(e,n,t.start,t.end);i&&(!r||i.dist<r.dist)&&(r=i)}))})),r&&(n.x=r.x,n.y=r.y);var o=n.x-this.x,s=n.y-this.y,u=Math.atan2(s,o);this.facingTarget=u,this.destination={x:n.x,y:n.y,time:t?Date.now():this.destination&&this.destination.time}}},{key:"setTarget",value:function(t){if(!t||t.dead)return this.target=null,void this.setDestination();if(Math.hypot(t.x+t.width/2-this.x,t.y+t.height/2-this.y)<t.width+this.radius){var n=i(a.mouseX,a.mouseY),e=n.x-this.x,r=n.y-this.y,o=Math.atan2(r,e);this.facingTarget=o,this.lastAction=Date.now(),this.target=t,u.wcStart=Date.now()}else this.setDestination()}}])&&s(n.prototype,e),r&&s(n,r),t}()),h=u;var c=300,f=6,l=e(80),y=e.n(l),d=e(81),g=e.n(d),p=e(82),x=e.n(p);e(110),e(77),e(78),e(79);var m=1,b=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=m++,this.type=n.type,this.x=n.x,this.y=n.y,this.height=n.height,this.width=n.width,this.boundHeight=n.boundHeight,this.boundWidth=n.boundWidth,this.img=n.img;var e=(this.width-this.boundWidth)/2,i=(this.height-this.boundHeight)/2;this.playerBounds={x1:this.x+e,x2:this.x+e+this.boundWidth,y1:this.y+i,y2:this.y+i+this.boundHeight},this.segments=[{start:{x:this.x,y:this.y},end:{x:this.x+this.width,y:this.y}},{start:{x:this.x,y:this.y+this.height},end:{x:this.x+this.width,y:this.y+this.height}},{start:{x:this.x,y:this.y},end:{x:this.x,y:this.y+this.height}},{start:{x:this.x+this.width,y:this.y},end:{x:this.x+this.width,y:this.y+this.height}}];var r=this.playerBounds,o=r.x1,a=r.x2,s=r.y1,u=r.y2;this.playerBoundsSegments=[{start:{x:o,y:s},end:{x:a,y:s}},{start:{x:o,y:u},end:{x:a,y:u}},{start:{x:o,y:s},end:{x:o,y:u}},{start:{x:a,y:s},end:{x:a,y:u}}]};function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,n){return!n||"object"!==w(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,n){return(M=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var O=function(t){function n(t){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=v(this,S(n).call(this,t))).type="tree",e.logs=t.logs,e.dead=!1,e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&M(t,n)}(n,t),n}(b),T=new Array(10).fill().map((function(t,n){var e=new Image;return e.src="src/assets/trees/RE_0".concat(n,".png"),e})),j=[{img:T[0],width:128,height:128,logs:12,boundWidth:96,boundHeight:86},{img:T[1],width:128,height:128,logs:15,boundWidth:108,boundHeight:78},{img:T[2],width:128,height:128,logs:9,boundWidth:86,boundHeight:86},{img:T[3],width:128,height:128,logs:9,boundWidth:86,boundHeight:86},{img:T[4],width:128,height:128,logs:3,boundWidth:60,boundHeight:60},{img:T[5],width:128,height:128,logs:6,boundWidth:78,boundHeight:76}];function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,n){return!n||"object"!==E(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,n){return(W=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var H=function(t){function n(t){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=_(this,P(n).call(this,t))).type="stone",e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&W(t,n)}(n,t),n}(b),I=new Array(9).fill().map((function(t,n){var e=new Image;return e.src="src/assets/stones/SM_00".concat(n+1,".png"),e})),B=[{img:I[0],width:128,height:128,boundWidth:88,boundHeight:96},{img:I[1],width:128,height:128,boundWidth:96,boundHeight:96},{img:I[2],width:128,height:128,boundWidth:68,boundHeight:80},{img:I[3],width:128,height:128,boundWidth:86,boundHeight:78},{img:I[4],width:128,height:128,boundWidth:96,boundHeight:64},{img:I[5],width:128,height:128,boundWidth:114,boundHeight:112}];function k(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.d(n,"mapSize",(function(){return X})),e.d(n,"halfWidth",(function(){return Y})),e.d(n,"halfHeight",(function(){return C})),e.d(n,"mapElements",(function(){return Q}));var A=document.getElementById("canvas"),R=A.getContext("2d"),D=window.innerWidth,L=window.innerHeight,X=1e4,Y=D/2,C=L/2,J={x1:h.radius,x2:X-h.radius,y1:h.radius,y2:X-h.radius};A.width=D,A.height=L;var q=new Image;q.src=y.a;var z=new Image;z.src=x.a;var F=new Image;F.src=g.a;var G=new Image;G.src="src/assets/survivor/knife/idle/survivor-idle_knife_0.png";var K=new Array(1e3).fill().map((function(){var t=j[o(0,j.length)],n=t.width,e=t.height;return new O(Object.assign({x:o(n,X-n),y:o(e,X-e)},t))})),N=new Array(1e3).fill().map((function(){var t=B[o(0,B.length)],n=t.width,e=t.height;return new H(Object.assign({x:o(n,X-n),y:o(e,X-e)},t))})),Q=[].concat(k(K),k(N));function U(t){t.target.touches?(a.mouseX=t.target.touches[0].clientX,a.mouseY=t.target.touches[0].clientY):(a.mouseX=t.clientX,a.mouseY=t.clientY)}var V=function(t){a.mouse1=!1},Z=function(t){a.mouse1=!0};A.addEventListener("mousemove",U),A.addEventListener("touchmove",U),A.addEventListener("mousedown",Z),A.addEventListener("touchstart",Z),document.addEventListener("mouseup",V),document.addEventListener("touchup",V),A.addEventListener("contextmenu",(function(t){t.preventDefault()})),document.addEventListener("keypress",(function(t){}));var $=Date.now();!function t(){var n=Date.now(),e=n-$;if(R.clearRect(0,0,D,L),a.mouse1){var o=i(a.mouseX,a.mouseY),s=K.find((function(t){return o.x>=t.playerBounds.x1&&o.x<=t.playerBounds.x2&&o.y>=t.playerBounds.y1&&o.y<=t.playerBounds.y2}));h.setTarget(s)}if(h.target&&h.wcStart+1e3<n&&h.woodcut(),h.facingTarget){var u=Math.abs(h.facingTarget-h.facing),l=!1;u>Math.PI&&(u=2*Math.PI-u,l=!0);var y=f*(e/1e3)/u,d=Math.min(y,u);l?h.facingTarget-h.facing<0?h.facing=h.facing+d*(2*Math.PI-Math.abs(h.facingTarget-h.facing)):h.facing=h.facing-d*(2*Math.PI-Math.abs(h.facingTarget-h.facing)):h.facing=h.facing+d*(h.facingTarget-h.facing),u<.1&&u>-.1&&(h.facing=h.facingTarget,h.facingTarget=null)}if(null!=h.destination){var g,p,x=Math.hypot(h.x-h.destination.x,h.y-h.destination.y),m=c*(e/1e3)/x;if(m<x){var b=m*(h.destination.x-h.x),w=m*(h.destination.y-h.y);g=h.x+b,p=h.y+w}else g=h.destination.x,p=h.destination.y,h.destination=null;var v=!1;Q.filter((function(t){return!t.dead})).forEach((function(t){g>=t.playerBounds.x1&&g<=t.playerBounds.x2&&p>=t.playerBounds.y1&&p<=t.playerBounds.y2&&(v=!0)})),(g<=J.x1||g>=J.x2||p<=J.y1||p>=J.y2)&&(v=!0),v?h.destination=null:(h.x=g,h.y=p)}var S=r(X,X);R.fillStyle="#544321",R.fillRect(Math.max(0,Y-h.x),Math.max(0,C-h.y),Math.min(D,S.x),Math.min(L,S.y));for(var M=0;M<D/96+1;M++)for(var O=0;O<L/96+1;O++)R.drawImage(z,96*M-h.x%96,96*O-h.y%96,96,96);if(R.fillStyle="rgba(80, 57, 23, 0.8)",Q.forEach((function(t){var n=r(t.playerBounds.x1,t.playerBounds.y1);R.fillRect(n.x,n.y,t.boundWidth,t.boundHeight)})),N.forEach((function(t){var n=r(t.x,t.y);n.x>D||n.y>L||n.x+t.width<0||n.y+t.height<0||R.drawImage(t.img,n.x,n.y,t.width,t.height)})),K.forEach((function(t){if(!t.dead){var n=r(t.x,t.y);n.x>D||n.y>L||n.x+t.width<0||n.y+t.height<0||R.drawImage(t.img,n.x,n.y,t.width,t.height)}})),h.destination){var T=r(h.destination.x,h.destination.y),j=n-h.destination.time,E=Math.max(20-j/10,5);R.beginPath(),R.strokeStyle="#f00",R.lineWidth=1,R.arc(T.x,T.y,E,0,2*Math.PI),R.closePath(),R.stroke()}if(R.setTransform(.2,0,0,.2,Y,C),R.rotate(h.facing),R.drawImage(G,-144.5,-112),R.setTransform(1,0,0,1,0,0),h.wcStart){var _=(n-600-h.wcStart)/400;_>0&&_<=1&&(R.setTransform(1,0,0,1,Y,C),R.rotate(h.facing+1.5*_),R.drawImage(q,0,-60),R.setTransform(1,0,0,1,0,0))}R.fillStyle="#222",Y-h.x>0&&R.fillRect(0,0,Y-h.x,L),C-h.y>0&&R.fillRect(0,0,D,C-h.y),S.x<D&&R.fillRect(S.x,0,D-S.x,L),S.y<L&&R.fillRect(0,S.y,D,L-S.y);R.fillStyle="#000",R.fillRect(10,L-50-10,50,50),R.drawImage(F,18,L-50-10+8,34,34),R.font="20px monospace",R.textBaseline="top",R.fillStyle="#ed4",R.fillText(h.logs,12,L-50-10+2),$=n,requestAnimationFrame(t)}()},80:function(t,n,e){t.exports=e.p+"src/assets/axe.png"},81:function(t,n,e){t.exports=e.p+"src/assets/log.png"},82:function(t,n,e){t.exports=e.p+"src/assets/ground.png"}});
//# sourceMappingURL=app.3e1d5758.js.map